---
layout: post                              # 레이아웃 : post(게시물)
title:  프로그레스 바 만들어보기
subtitle: 이전 print를 지우는 \r 표현과 함께!
date:   2023-01-12 10:12:00 +0900         # 게시물 작성 일자
categories: lab
author:                                   # 작성자
tags: 프로그레스바 \r tqdm 대체하기
meta: "Springfield"                       # 이건 뭐지?
---
<!--postNo: 20230112_001-->


## 인트로
tqdm 만들어보기 : print 줄바꿈 없이 출력하기|아직 미작성 : tqdm을 쓰면 느려지는 것 같아서 자신은 잘 안쓴다는 선생님의 말씀 / 횟수가 많은 동일 작업을 각각의 방법으로 했을 때의 비교를 해보면 되겠다.


## 사용 개념 : 정규표현식 \r
tqdm을 살펴보면, 진행률을 한 줄로 표시함을 볼 수 있다.  
그러므로 필요한 기술은, 연속된 출력에서 이전 출력 내용을 지우고 업데이트 하는 것.  
간단한 기술로 가능한데, 바로 print 메서드에 정규표현식을 이용하는 것이다.  

```python
# 그냥 print 사용해보기
print('1번입니다', end='')
print('2번입니다', end='')
-----------출력-----------
1번입니다2번입니다

# \r을 사용해 이전 출력내용 지우기
print('1번입니다', end='')
print('\r2번입니다', end='')
-----------출력-----------
2번입니다.

```
* \r 정규표현식 : 앞쪽 출력물을 지운다.  
* end = '' : print의 파라미터로, 기본값은 '\n'(줄바꿈)으로 되어있다.  


### 1차 : 진행률 %로 표기해보기  
1회 ~ 100회 동안 각 회마다 진행률%를 출력하도록 했다.  
time.sleep을 이용해 0.1초 간격을 두고 각 회차가 진행된다.  
```python
import time

for i in range(101):
    print(f'\r{i}%', end='')
    time.sleep(0.1)
```
![](/assets/images/20230112_001_002.gif)


### 2차 : 진행률을 input num과 매칭하여 진행률 표기하기  
진행 횟수인 fit_num에 대해 %로 표기를 할 수 있게끔  
(현재 진행횟수 / fit_num * 100)의 반올림 값을 표기하게 한다.  
```python
import time
fit_num = 51

for i in range(fit_num):
    print(f'\r{round(i/(fit_num-1)*100)}%', end='')
    time.sleep(0.1)
```
![](/assets/images/20230112_001_003.gif)


### 3차 : 좀 더 예쁘게 디자인해보기
```python
import time
fit_num = 101

for i in range(fit_num):
    
    n = round(i / ((fit_num-1)//10))
    k = 10 - n
    m = 1 if k > 0 else 0
    
    print(f'\r{round(i/(fit_num-1)*100)}%',
          '|',
          '■ ' * n, '>' * m, ' .' * (k-1),
          '|',
          end='')
    
    time.sleep(0.1)
```
![](/assets/images/20230112_001_001.gif)



## 레퍼런스  
https://jellyho.com/blog/96/
